@if (loading()) {
    <section class="fixed top-0 left-0 h-screen w-screen z-50 bg-black/50">
        <div class="h-screen flex flex-col justify-center items-center gap-3">
            <div class="h-10 w-10 animate-spin rounded-full border-4 border-sky-500 border-t-transparent"></div>
            <p class="text-text-primary text-sm">
                Loading...
            </p>
        </div>
    </section>
}

<header class="bg-surface min-h-52 flex justify-center mb-2">
    <div class="relative py-24 p-6 sm:py-0 w-full flex flex-wrap justify-start items-center gap-5 md:max-w-5xl md:gap-7">
        <!-- Avatar -->
        <figure>
            @if (user?.avatarFull) {
                <img src="{{user?.avatarFull}}" alt="AvatarFull" class="size-24 rounded-2xl md:size-32">
            } @else {
                <img src="unknown.png" alt="AvatarFull" class="size-24 rounded-2xl md:size-32">
            }
            <div class="mt-[-11px] text-center">
                <span class="text-text-primary bg-secondary px-2 py-0.5 rounded-full md:px-4 md:py-2">
                    @if (user?.level) {
                        {{user?.level}}
                    } @else {
                        0
                    }
                </span>
            </div>
        </figure>

        <!-- User Information -->
        <section class="flex flex-wrap justify-start items-center gap-5 md:gap-7">
            <!-- Personal Information -->
            <div>
                @if (user?.personaName) {
                    <h1 class="inline-block text-text-primary font-bold text-2xl md:text-4xl">{{user?.personaName}}</h1>
                    <h2 class="inline-block text-text-muted text-base ml-2 mb-3 md:text-xl md:mb-6">#{{user?.username}}</h2>
                } @else {
                    <h2 class="inline-block text-text-primary ml-2 mb-3 md:text-4xl md:mb-6">{{user?.username}}</h2>
                }
                <h3 class="text-text-muted text-sm md:text-base">{{user?.steamId}}</h3>
            </div>

            <!-- Link Steam Account -->
            <a (click)="redirectToSteam()" class="absolute top-3 right-0 sm:right-3 flex items-center justify-center p-4 text-xs font-medium text-text-muted hover:text rounded bg-secondary gap-2 hover:scale-105 transition duration-150 cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M.329 10.333A8.01 8.01 0 0 0 7.99 16C12.414 16 16 12.418 16 8s-3.586-8-8.009-8A8.006 8.006 0 0 0 0 7.468l.003.006 4.304 1.769A2.2 2.2 0 0 1 5.62 8.88l1.96-2.844-.001-.04a3.046 3.046 0 0 1 3.042-3.043 3.046 3.046 0 0 1 3.042 3.043 3.047 3.047 0 0 1-3.111 3.044l-2.804 2a2.223 2.223 0 0 1-3.075 2.11 2.22 2.22 0 0 1-1.312-1.568L.33 10.333Z"/>
                    <path d="M4.868 12.683a1.715 1.715 0 0 0 1.318-3.165 1.7 1.7 0 0 0-1.263-.02l1.023.424a1.261 1.261 0 1 1-.97 2.33l-.99-.41a1.7 1.7 0 0 0 .882.84Zm3.726-6.687a2.03 2.03 0 0 0 2.027 2.029 2.03 2.03 0 0 0 2.027-2.029 2.03 2.03 0 0 0-2.027-2.027 2.03 2.03 0 0 0-2.027 2.027m2.03-1.527a1.524 1.524 0 1 1-.002 3.048 1.524 1.524 0 0 1 .002-3.048"/>
                </svg>
                <span class="w-full">
                    @if (user?.personaName) {
                        Steam account linked
                    } @else {
                        Link with your Steam account
                    }
                </span>
            </a> 
        </section>
        
        <!-- User Stats -->
        <section class="absolute flex gap-6 self-end right-0 bottom-3 px-4 text-sm">
            <div class="flex items-end gap-2">
                <mat-icon class="text-text-primary">sports_esports</mat-icon>
                <span class="text-text-primary font-semibold">{{totalGames() || "N/A"}}</span>
            </div>
            <div class="flex items-end gap-2">
                <mat-icon class="text-text-primary">emoji_events</mat-icon>
                <span class="text-text-primary font-semibold">{{totalAchievements() || "N/A"}}</span>
            </div>
        </section>
    </div>
</header>